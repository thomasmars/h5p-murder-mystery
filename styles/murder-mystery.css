.h5p-mm { font-family: system-ui, sans-serif; position: relative; }
.h5p-mm__header { padding: 12px; border-bottom: 1px solid #ddd; }
.h5p-mm__root { padding: 12px; }
.h5p-mm__layout { display: grid; grid-template-columns: 220px 1fr; gap: 12px; }
.h5p-mm__sidebar { border-right: 1px solid #eee; padding-right: 12px; }
.h5p-mm__side-title { margin: 0 0 8px; font-size: 14px; color: #555; }
.h5p-mm__people { list-style: none; padding: 0; margin: 0; }
.h5p-mm__person { padding: 6px 8px; cursor: pointer; border-radius: 6px; }
.h5p-mm__person:hover { background: #f5f5f5; }
.h5p-mm__person.is-active { background: #eef5ff; }
.h5p-mm__chat { display: flex; flex-direction: column; }
.h5p-mm__log { height: clamp(320px, 45vh, 520px); overflow-y: auto; -webkit-overflow-scrolling: touch; border: 1px solid #eee; border-radius: 6px; padding: 8px; background: #fff; }
.h5p-mm__msg { max-width: 80%; margin: 6px 0; padding: 8px 10px; border-radius: 12px; line-height: 1.3; }
.h5p-mm__msg--user { margin-left: auto; background: #e6f2ff; }
.h5p-mm__msg--assistant { margin-right: auto; background: #f0f0f0; }
.h5p-mm__input { display: flex; gap: 8px; margin-top: 8px; }
.h5p-mm__text { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font: inherit; }
.h5p-mm__text--chat { min-height: 64px; padding: 12px; resize: vertical; }
.h5p-mm__send, .h5p-mm__solve-btn { padding: 8px 12px; border: 1px solid #ccc; background: #fafafa; border-radius: 6px; cursor: pointer; }
.h5p-mm__solve { display: flex; gap: 8px; margin-top: 10px; }
.h5p-mm__solution { margin-top: 12px; display: none; }
.h5p-mm__solution.is-visible { display: block; }
.h5p-mm__solution-line { margin: 6px 0; }
.h5p-mm__solution-wrong { color: #b00; }
.h5p-mm__toolbar { display: flex; justify-content: flex-end; align-items: center; gap: 8px; margin-bottom: 6px; }
.h5p-mm__audio-toggle { font: inherit; padding: 6px 10px; border-radius: 16px; border: 1px solid #c7ccd4; background: #f6f7fa; color: #4a5361; cursor: pointer; transition: all 0.15s ease; }
.h5p-mm__audio-toggle:hover { background: #eef2f9; }
.h5p-mm__audio-toggle.is-on { background: #1d48c7; color: #fff; border-color: #1d48c7; box-shadow: 0 4px 12px rgba(29,72,199,0.3); }
.h5p-mm__audio-toggle.is-on:hover { background: #1740b5; }
.h5p-mm__audio-status { margin-left: 10px; font-size: 12px; color: #65708a; display: inline-flex; align-items: center; gap: 4px; }
.h5p-mm__ending-full { position: absolute; inset: 0; z-index: 10; display: flex; justify-content: center; align-items: center; padding: clamp(18px, 4vw, 32px); background: rgba(9, 12, 18, 0.88); backdrop-filter: blur(2px); }
.h5p-mm__ending-panel { width: min(520px, 92%); border-radius: 12px; padding: clamp(20px, 3.5vw, 30px); background: linear-gradient(165deg, rgba(15,19,31,0.95) 0%, rgba(30,39,57,0.95) 100%); box-shadow: 0 20px 48px rgba(3,7,18,0.55); display: flex; flex-direction: column; align-items: center; text-align: center; color: #f2f4f8; gap: clamp(12px, 2.2vw, 20px); position: relative; }
.h5p-mm__ending-img-wrap { width: clamp(180px, 60%, 320px); aspect-ratio: 4 / 3; border-radius: 10px; overflow: hidden; box-shadow: 0 18px 36px rgba(2,6,16,0.6); }
.h5p-mm__ending-img { width: 100%; height: 100%; object-fit: contain; object-position: center; display: block; background: rgba(6, 9, 16, 0.6); }
.h5p-mm__ending-title { font-size: clamp(18px, 3vw, 22px); letter-spacing: 1px; text-transform: uppercase; margin: 0; }
.h5p-mm__ending-text { font-size: clamp(13px, 2.2vw, 15px); line-height: 1.65; color: #d7d9e0; max-width: 420px; }
.h5p-mm__ending-text p { margin: 0 0 8px; }
